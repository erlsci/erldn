# erldn 1.1.0 Release Notes

**Release Date:** January 2025  
**Previous Version:** 1.0.6

## üöÄ Major Features

### Multi-Value EDN Parsing Support
- **NEW**: Added support for parsing multiple top-level EDN values in a single input
- **NEW**: `parse/1` function with intelligent binary/string/file auto-detection
- **NEW**: `parse_file/1` function for parsing `.edn` files with extension validation
- **ENHANCED**: `parse_str/1` now intelligently handles both single and multiple values:
  - Single values return unwrapped (e.g., `42`)
  - Multiple values return as lists (e.g., `[1, 2, 3]`)

### File Input Support
- **NEW**: Automatic file detection - if input string is an existing `.edn` file, it will be read and parsed
- **NEW**: Comprehensive file error handling with detailed error messages
- **NEW**: Support for multi-value parsing from files

## üîß API Enhancements

### New Public Functions
- `parse/1` - High-level parsing with automatic input type detection
- `parse_file/1` - Direct file parsing with `.edn` extension requirement

### Enhanced Functions
- `parse_str/1` - Now handles multiple values intelligently
- `lex_str/1` - Exposed for debugging and custom parsing scenarios

### Backward Compatibility
- ‚úÖ **Fully backward compatible** - all existing `parse_str/1` usage continues to work
- ‚úÖ Single value parsing behavior unchanged
- ‚úÖ All existing data type mappings preserved

## üìä Quality Improvements

### Test Coverage
- **NEW**: 100% test coverage achieved (224 tests, 0 failures)
- **NEW**: Comprehensive integration tests for multi-value parsing
- **NEW**: Edge case testing for file operations and error handling
- **NEW**: String escaping tests including tab character handling
- **NEW**: Property-based testing support via PropEr

### Build System Modernization
- **ENHANCED**: Updated to modern rebar3 build configuration
- **NEW**: Dialyzer static analysis integration with proper exclusions for generated code
- **NEW**: Xref cross-reference analysis
- **NEW**: erlfmt code formatting integration
- **NEW**: Comprehensive alias commands:
  - `rebar3 check` - Full quality checks (xref, dialyzer, format, tests, coverage)
  - `rebar3 testcheck` - Test-focused checks (excludes dialyzer for CI/CD)
  - `rebar3 publish` - Package publishing workflow

### Code Quality
- **FIXED**: Application specification issues (removed invalid `mod` entry)
- **ENHANCED**: Proper dialyzer configuration with generated file exclusions
- **ENHANCED**: Coverage analysis with exclusions for lexer/parser generated files
- **NEW**: Pre-commit formatting validation

## üìö Documentation Overhaul

### Comprehensive Documentation
- **NEW**: Detailed parser type mappings table showing EDN ‚Üí Erlang transformations
- **NEW**: Complete `to_erlang/1` and `to_erlang/2` documentation with examples
- **NEW**: Tag handler system documentation with usage patterns
- **NEW**: Implementation status tracking for EDN features
- **ENHANCED**: API documentation for all exported functions
- **NEW**: Usage examples for all major features

### Developer Resources
- **NEW**: Test coverage completion guide for contributors
- **NEW**: Multi-value EDN feature implementation documentation
- **NEW**: EDN implementation analysis and design decisions
- **NEW**: Release notes and versioning documentation

## üîÑ Internal Improvements

### Parser Enhancements
- **ENHANCED**: Updated yecc grammar to support multiple consecutive values
- **ENHANCED**: Improved error propagation through parsing layers
- **ENHANCED**: Better handling of whitespace and comments between values

### Code Organization
- **REFACTORED**: Made internal multi-value functions private for cleaner API
- **ENHANCED**: Improved error handling with consistent error formats
- **FIXED**: String escaping edge cases (particularly tab character handling)

## üêõ Bug Fixes

- **FIXED**: Application startup issues (`badstartspec` error)
- **FIXED**: Tab character escaping in string serialization
- **FIXED**: Dialyzer warnings and CI/CD pipeline issues
- **FIXED**: File extension validation edge cases
- **FIXED**: Test function name conflicts (removed duplicates)

## üì¶ Package Metadata Updates

- **UPDATED**: Version bumped to 1.1.0
- **UPDATED**: Package name set to `erlsci_edn` 
- **CHANGED**: License updated to MIT (was Apache-2.0)
- **ENHANCED**: Comprehensive package metadata for Hex.pm publishing
- **NEW**: GitHub links and build tool specifications

## ‚ö° Performance & Reliability

### Error Handling
- **ENHANCED**: Comprehensive error propagation through all parsing layers
- **NEW**: Detailed file error reporting with context
- **NEW**: Lexer error handling and propagation
- **ENHANCED**: Validation of file extensions before parsing

### Memory & Efficiency  
- **MAINTAINED**: Binary string handling for efficient memory usage
- **MAINTAINED**: Lazy evaluation patterns where applicable
- **ENHANCED**: Proper cleanup in test scenarios and file operations

## üîÆ Looking Forward

### Planned Features (WIP)
- Support for special numerical values `##Inf`, `##-Inf`, and `##NaN` ([GitHub Issue #10](https://github.com/erlsci/erldn/issues/10))
- Enhanced Unicode character support
- Additional EDN format extensions

## üö® Breaking Changes

**None** - This release maintains full backward compatibility with version 1.0.6.

## üíæ Installation

Update your `rebar.config`:

```erlang
{deps, [
    {erldn, "1.1.0", {pkg, erlsci_edn}}
]}.
```

## üôè Acknowledgments

This release represents a major modernization effort focused on:
- Developer experience improvements
- Comprehensive testing and quality assurance  
- Documentation completeness
- Build system modernization
- API enhancement while maintaining compatibility

The multi-value parsing feature enables erldn to handle complex EDN data files with multiple top-level expressions, making it suitable for configuration files, data interchange, and batch processing scenarios.

---

**Full Changelog**: [v1.0.6...v1.1.0](https://github.com/erlsci/erldn/compare/v1.0.6...v1.1.0)